{% extends 'base.html.twig' %}

{% block title %}Dashboard{% endblock %}

{% block body %}
    {% include 'components/heading.html.twig' with { level: 1, content: 'Dashboard' } %}

    {% include 'components/flash_messages.html.twig' %}

    <p class="mb-6">
        {% include 'components/button.html.twig' with { variant: 'primary', label: 'Create alias', url: path('app_alias_new') } %}
    </p>

    {% include 'components/heading.html.twig' with { level: 2, content: 'Your aliases' } %}

    {% if aliases is empty %}
        <p class="mt-2 text-neutral-600">You have no aliases yet. {% include 'components/button.html.twig' with { variant: 'secondary', label: 'Create one', url: path('app_alias_new') } %}</p>
    {% else %}
        {% embed 'components/table.html.twig' %}
            {% block thead %}
                <th class="px-4 py-3 text-left text-sm font-medium text-neutral-700">Address</th>
                <th class="px-4 py-3 text-left text-sm font-medium text-neutral-700">Status</th>
                <th class="px-4 py-3 text-left text-sm font-medium text-neutral-700">Created</th>
                <th class="px-4 py-3 text-left text-sm font-medium text-neutral-700">Actions</th>
            {% endblock %}
            {% block tbody %}
                {% for alias in aliases %}
                    <tr>
                        <td class="px-4 py-3 text-left text-sm text-neutral-900">{{ alias.localPart }}@{{ alias_domain }}</td>
                        <td class="px-4 py-3 text-left text-sm">
                            {% include 'components/badge.html.twig' with { variant: alias.enabled ? 'enabled' : 'disabled', label: alias.enabled ? 'Enabled' : 'Disabled' } %}
                        </td>
                        <td class="px-4 py-3 text-left text-sm text-neutral-900">{{ alias.createdAt|date('Y-m-d H:i') }}</td>
                        <td class="px-4 py-3 text-left text-sm">
                            {% if alias.enabled %}
                                <form method="post" action="{{ path('app_alias_disable', { id: alias.id }) }}" class="inline" data-turbo="false">
                                    <input type="hidden" name="_token" value="{{ csrf_token('disable_alias') }}">
                                    {% include 'components/button.html.twig' with { variant: 'secondary', type: 'submit', label: 'Disable' } %}
                                </form>
                            {% else %}
                                <span class="text-neutral-500">â€”</span>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            {% endblock %}
        {% endembed %}
    {% endif %}
{% endblock %}
